<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mm-bluelight: main/dri/imu.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mm-bluelight
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_dc6230c966344a01199979f005b914f1.html">dri</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">imu.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="imu_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// C++</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;bitset&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// ESP-IDF</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;driver/gpio.h&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;driver/spi_master.h&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;esp_intr_alloc.h&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;rom/ets_sys.h&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// Project</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="spi_8h.html">spi.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="classImu.html">   17</a></span>&#160;<span class="keyword">class </span><a class="code" href="classImu.html">Imu</a> {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">   19</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">float</span> <a class="code" href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">ANGULAR_RATE_SENSITIVITY</a> = 70.0f;          <span class="comment">// [mdps/LSB]</span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">   20</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">float</span> <a class="code" href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">LINEAR_ACCELERATION_SENSITIVITY</a> = 0.061f;  <span class="comment">// [mg/LSB]</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="structImu_1_1Axis.html">   23</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structImu_1_1Axis.html">Axis</a> {</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">   24</a></span>&#160;    T <a class="code" href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">x</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">   25</a></span>&#160;    T <a class="code" href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">y</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">   26</a></span>&#160;    T <a class="code" href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">z</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  };</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">   30</a></span>&#160;  <a class="code" href="classSpi.html">Spi</a> &amp;<a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">   31</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">index_</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="classImu.html#a82c6d5e61f740657651a073fb46d08d8">   32</a></span>&#160;  uint8_t *<a class="code" href="classImu.html#a82c6d5e61f740657651a073fb46d08d8">rx_buffer_</a>, *<a class="code" href="classImu.html#a657f1abf07fbe1dec5e24c06f02103ae">tx_buffer_</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">   33</a></span>&#160;  <a class="code" href="structImu_1_1Axis.html">Axis&lt;int16_t&gt;</a> <a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>, <a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classImu.html#ac5e55f4beb879b3405d28f84b74224dd">   34</a></span>&#160;  <a class="code" href="structImu_1_1Axis.html">Axis&lt;float&gt;</a> <a class="code" href="classImu.html#ab8a10f812aee545be01a6c561179c9b6">gyro_</a>, <a class="code" href="classImu.html#ac5e55f4beb879b3405d28f84b74224dd">accel_</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// 送受信バッファサイズ</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="classImu.html#a6dc0576929ab6bbe050110f1ad661d21">   37</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">size_t</span> <a class="code" href="classImu.html#a6dc0576929ab6bbe050110f1ad661d21">BUFFER_SIZE</a> = 12;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">// レジスタ</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="classImu.html#a509fd7a1dcc9857b7e031aef58cce136">   40</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a509fd7a1dcc9857b7e031aef58cce136">REG_WHO_AM_I</a> = 0x0F;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classImu.html#abf6055bbdaaa91b3bdc67d577c682f25">   41</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#abf6055bbdaaa91b3bdc67d577c682f25">DAT_WHO_AM_I</a> = 0x6B;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classImu.html#a87539ee148ca9c308d50d062403f462e">   43</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a87539ee148ca9c308d50d062403f462e">REG_CTRL1_XL</a> = 0x10;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classImu.html#a33185f44d1a2ee3501df892bfdceeef4">   44</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a33185f44d1a2ee3501df892bfdceeef4">BIT_CTRL1_XL_ODR_XL3</a> = 7;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classImu.html#a6a3e0e77d91b646be96c6c821908ca10">   45</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a6a3e0e77d91b646be96c6c821908ca10">BIT_CTRL1_XL_ODR_XL2</a> = 6;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classImu.html#a7a1cd874ed85e8a9041a33f693729b6e">   46</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a7a1cd874ed85e8a9041a33f693729b6e">BIT_CTRL1_XL_ODR_XL1</a> = 5;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classImu.html#ab61dcbc2e270485c0d167c3346a20a86">   47</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ab61dcbc2e270485c0d167c3346a20a86">BIT_CTRL1_XL_ODR_XL0</a> = 4;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classImu.html#a7e138ebf6af3c9008b1607f777c263ec">   48</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a7e138ebf6af3c9008b1607f777c263ec">BIT_CTRL1_XL_FS1_XL</a> = 3;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classImu.html#a1ca1aaf664c7fc758b0bfce2db82c901">   49</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a1ca1aaf664c7fc758b0bfce2db82c901">BIT_CTRL1_XL_FS0_XL</a> = 2;</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classImu.html#a2c4b3614133fa63f1f9d68c4b0d3eb58">   50</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a2c4b3614133fa63f1f9d68c4b0d3eb58">BIT_CTRL1_XL_LPF2_XL_EN</a> = 1;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="classImu.html#add3252f670ae91cc97081d194151042c">   52</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#add3252f670ae91cc97081d194151042c">REG_CTRL2_G</a> = 0x11;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="classImu.html#ab20f0eccbdfcf51754de0bd06b079d0a">   53</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ab20f0eccbdfcf51754de0bd06b079d0a">BIT_CTRL2_G_ODR_G3</a> = 7;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classImu.html#a74167121c2e474b16052e9e86379d325">   54</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a74167121c2e474b16052e9e86379d325">BIT_CTRL2_G_ODR_G2</a> = 6;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classImu.html#a4e6eb36cc8b3180ded6464b0e019e293">   55</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a4e6eb36cc8b3180ded6464b0e019e293">BIT_CTRL2_G_ODR_G1</a> = 5;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classImu.html#ac0e4b5f64dfc22901864481b515515dd">   56</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ac0e4b5f64dfc22901864481b515515dd">BIT_CTRL2_G_ODR_G0</a> = 4;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="classImu.html#aa186fe3906c6980b6ba1e667558d7a9d">   57</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#aa186fe3906c6980b6ba1e667558d7a9d">BIT_CTRL2_G_FS1_G</a> = 3;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="classImu.html#ae9b0a9e77d28ec1a59d12a42cdfb9a22">   58</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ae9b0a9e77d28ec1a59d12a42cdfb9a22">BIT_CTRL2_G_FS0_G</a> = 2;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classImu.html#aca5b93445be82d95555925293300d417">   59</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#aca5b93445be82d95555925293300d417">BIT_CTRL2_G_FS_125</a> = 1;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classImu.html#a45d5ce9dd7fa466a26855c372dc37928">   60</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a45d5ce9dd7fa466a26855c372dc37928">BIT_CTRL2_G_FS_4000</a> = 0;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classImu.html#ac782d7ccb87c0754079f217724c991a7">   62</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ac782d7ccb87c0754079f217724c991a7">REG_CTRL3_C</a> = 0x12;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classImu.html#a9daf881a4f2657762eff013ccabfd5b4">   63</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a9daf881a4f2657762eff013ccabfd5b4">BIT_CTRL3_C_BDU</a> = 6;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classImu.html#a350333553e72013d1ac56a2b620b62a4">   64</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a350333553e72013d1ac56a2b620b62a4">BIT_CTRL3_C_SW_RESET</a> = 0;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="classImu.html#aae97907b426cfed02d56cbc94d8aac0b">   66</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#aae97907b426cfed02d56cbc94d8aac0b">REG_CTRL4_C</a> = 0x13;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classImu.html#a1b3d6c0550a9330a0194e1b48abfae96">   67</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a1b3d6c0550a9330a0194e1b48abfae96">BIT_CTRL4_C_LPF1_SEL_G</a> = 1;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classImu.html#a551298c7f232b1ad9f8752e3a5d09232">   69</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a551298c7f232b1ad9f8752e3a5d09232">REG_CTRL6_C</a> = 0x15;</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="classImu.html#aa4a0f14a0d5b720e95185e1dca1f33ba">   70</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#aa4a0f14a0d5b720e95185e1dca1f33ba">BIT_CTRL6_C_USR_OFF_W</a> = 3;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classImu.html#a6318aab0eb086fb8e57a8b3b9019105e">   71</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a6318aab0eb086fb8e57a8b3b9019105e">BIT_CTRL6_C_FTYPE_2</a> = 2;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="classImu.html#a6c0f79b21546b4525af37e1f20ba72d0">   72</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a6c0f79b21546b4525af37e1f20ba72d0">BIT_CTRL6_C_FTYPE_1</a> = 1;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classImu.html#a0fc4cc324a79fc27b405d90ff01d42a3">   73</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a0fc4cc324a79fc27b405d90ff01d42a3">BIT_CTRL6_C_FTYPE_0</a> = 0;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classImu.html#a8514b20f08893ed178c6dd0648169297">   75</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a8514b20f08893ed178c6dd0648169297">REG_CTRL7_G</a> = 0x16;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classImu.html#ad35aadcfb10e7cce13c6ad25bdf40671">   76</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ad35aadcfb10e7cce13c6ad25bdf40671">BIT_CTRL7_G_USR_OFF_ON_OUT</a> = 1;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="classImu.html#a072ddb22caa61ff8e0469d3faa8f0823">   78</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a072ddb22caa61ff8e0469d3faa8f0823">REG_CTRL8_XL</a> = 0x17;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classImu.html#a6457881de4f643deef3d3a5ff732b56d">   79</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a6457881de4f643deef3d3a5ff732b56d">BIT_CTRL8_XL_HPCF_XL_2</a> = 7;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classImu.html#ad3d0283012b16ba6403bebe46ea6ef56">   80</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ad3d0283012b16ba6403bebe46ea6ef56">BIT_CTRL8_XL_HPCF_XL_1</a> = 6;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="classImu.html#ab221096a2acce79591ed4fc4a09569a0">   81</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ab221096a2acce79591ed4fc4a09569a0">BIT_CTRL8_XL_HPCF_XL_0</a> = 5;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classImu.html#a53f13268cb9f37e431b3a2160330a5da">   82</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a53f13268cb9f37e431b3a2160330a5da">BIT_CTRL8_XL_FASTSETTL_MODE_XL</a> = 3;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classImu.html#acbacfd910a018428a362a44f05f7f445">   84</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#acbacfd910a018428a362a44f05f7f445">REG_CTRL9_XL</a> = 0x18;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classImu.html#a79822fc7e16c3d138e0db26fd7f2dbaf">   85</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a79822fc7e16c3d138e0db26fd7f2dbaf">BIT_CTRL9_XL_I3C_DISABLE</a> = 1;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classImu.html#ae0af4a19b2dfcb0dbafbe9bad0658cb1">   87</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#ae0af4a19b2dfcb0dbafbe9bad0658cb1">REG_OUTX_L_G</a> = 0x22;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classImu.html#af03ac1be37e3ef1fa5915f0275b38269">   89</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#af03ac1be37e3ef1fa5915f0275b38269">REG_X_OFS_USR</a> = 0x73;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classImu.html#a457919e0c32e762c5a1e1ef2c2056504">   90</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a457919e0c32e762c5a1e1ef2c2056504">REG_Y_OFS_USR</a> = 0x74;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classImu.html#a33f6948b1f3fe92a4d10434aa4c836e0">   91</a></span>&#160;  <span class="keyword">static</span> constexpr uint8_t <a class="code" href="classImu.html#a33f6948b1f3fe92a4d10434aa4c836e0">REG_Z_OFS_USR</a> = 0x75;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classImu.html#a9760cd93503527afadbe86de9af7c7c2">  102</a></span>&#160;  <span class="keyword">static</span> constexpr int8_t <a class="code" href="classImu.html#a9760cd93503527afadbe86de9af7c7c2">DAT_X_OFS_USR</a> = -1;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classImu.html#a67e2590ed709520e722dee9e15b5734d">  103</a></span>&#160;  <span class="keyword">static</span> constexpr int8_t <a class="code" href="classImu.html#a67e2590ed709520e722dee9e15b5734d">DAT_Y_OFS_USR</a> = -46;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classImu.html#a4dcb587aad81bcf672b827571a626d2e">  104</a></span>&#160;  <span class="keyword">static</span> constexpr int8_t <a class="code" href="classImu.html#a4dcb587aad81bcf672b827571a626d2e">DAT_Z_OFS_USR</a> = 5;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">  106</a></span>&#160;  uint8_t <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(uint8_t reg) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">auto</span> trans = <a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>.<a class="code" href="classSpi.html#ade7f363df8128f984a04896748284790">transaction</a>(<a class="code" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">index_</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    uint8_t *p = trans-&gt;rx_data;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    trans-&gt;flags = SPI_TRANS_USE_TXDATA | SPI_TRANS_USE_RXDATA;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    trans-&gt;tx_buffer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    trans-&gt;rx_buffer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    trans-&gt;addr = reg | 0x80;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    trans-&gt;length = 8;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    trans-&gt;rxlength = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>.<a class="code" href="classSpi.html#a91c0eeec99491ce1392baecdb8ec7495">transmit</a>(<a class="code" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">index_</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> p[0];</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">  118</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(uint8_t reg, uint8_t <a class="code" href="namespacedata.html">data</a>) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keyword">auto</span> trans = <a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>.<a class="code" href="classSpi.html#ade7f363df8128f984a04896748284790">transaction</a>(<a class="code" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">index_</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    trans-&gt;flags = SPI_TRANS_USE_TXDATA | SPI_TRANS_USE_RXDATA;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    trans-&gt;tx_buffer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    trans-&gt;rx_buffer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    trans-&gt;addr = reg;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    trans-&gt;length = 8;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    trans-&gt;rxlength = 0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    trans-&gt;tx_data[0] = <a class="code" href="namespacedata.html">data</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">bool</span> ret = <a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>.<a class="code" href="classSpi.html#a91c0eeec99491ce1392baecdb8ec7495">transmit</a>(<a class="code" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">index_</a>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classImu.html#a535be22e7004297f3be9c6f7be658748">  132</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classImu.html#a535be22e7004297f3be9c6f7be658748">Imu</a>(<a class="code" href="classSpi.html">Spi</a> &amp;spi, gpio_num_t spics_io_num) : <a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>(spi), <a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>(), <a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>(), <a class="code" href="classImu.html#ab8a10f812aee545be01a6c561179c9b6">gyro_</a>(), <a class="code" href="classImu.html#ac5e55f4beb879b3405d28f84b74224dd">accel_</a>() {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// 転送用バッファを確保</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="classImu.html#a657f1abf07fbe1dec5e24c06f02103ae">tx_buffer_</a> = <span class="keyword">reinterpret_cast&lt;</span>uint8_t *<span class="keyword">&gt;</span>(heap_caps_calloc(<a class="code" href="classImu.html#a6dc0576929ab6bbe050110f1ad661d21">BUFFER_SIZE</a>, <span class="keyword">sizeof</span>(uint8_t), MALLOC_CAP_DMA));</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classImu.html#a82c6d5e61f740657651a073fb46d08d8">rx_buffer_</a> = <span class="keyword">reinterpret_cast&lt;</span>uint8_t *<span class="keyword">&gt;</span>(heap_caps_calloc(<a class="code" href="classImu.html#a6dc0576929ab6bbe050110f1ad661d21">BUFFER_SIZE</a>, <span class="keyword">sizeof</span>(uint8_t), MALLOC_CAP_DMA));</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// バスにデバイスを追加</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">index_</a> = <a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>.<a class="code" href="classSpi.html#aedce6d0a15c2b6e76fc2929260b084a0">add</a>(0, 8, 3, SPI_MASTER_FREQ_10M, spics_io_num, 1);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    std::bitset&lt;8&gt; reg;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// 相手が合っているか確認</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    assert(<a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#a509fd7a1dcc9857b7e031aef58cce136">REG_WHO_AM_I</a>) == <a class="code" href="classImu.html#abf6055bbdaaa91b3bdc67d577c682f25">DAT_WHO_AM_I</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#ac782d7ccb87c0754079f217724c991a7">REG_CTRL3_C</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// ソフトウェア・リセット</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    reg[<a class="code" href="classImu.html#a350333553e72013d1ac56a2b620b62a4">BIT_CTRL3_C_SW_RESET</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// リセット実行</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#ac782d7ccb87c0754079f217724c991a7">REG_CTRL3_C</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// 初期設定</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#acbacfd910a018428a362a44f05f7f445">REG_CTRL9_XL</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// I3Cを無効化</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    reg[<a class="code" href="classImu.html#a79822fc7e16c3d138e0db26fd7f2dbaf">BIT_CTRL9_XL_I3C_DISABLE</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// CTRL9_XLを反映</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#acbacfd910a018428a362a44f05f7f445">REG_CTRL9_XL</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#ac782d7ccb87c0754079f217724c991a7">REG_CTRL3_C</a>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// 読み出ししているレジスタは更新しない(Block Data Update)</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    reg[<a class="code" href="classImu.html#a9daf881a4f2657762eff013ccabfd5b4">BIT_CTRL3_C_BDU</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// CTRL3_Cを反映</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#ac782d7ccb87c0754079f217724c991a7">REG_CTRL3_C</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// 加速度計の設定</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#a87539ee148ca9c308d50d062403f462e">REG_CTRL1_XL</a>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// 出力レートを1.66kHzに設定</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    reg[<a class="code" href="classImu.html#a33185f44d1a2ee3501df892bfdceeef4">BIT_CTRL1_XL_ODR_XL3</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    reg[<a class="code" href="classImu.html#a6a3e0e77d91b646be96c6c821908ca10">BIT_CTRL1_XL_ODR_XL2</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    reg[<a class="code" href="classImu.html#a7a1cd874ed85e8a9041a33f693729b6e">BIT_CTRL1_XL_ODR_XL1</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    reg[<a class="code" href="classImu.html#ab61dcbc2e270485c0d167c3346a20a86">BIT_CTRL1_XL_ODR_XL0</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// スケールを+-2gに設定</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    reg[<a class="code" href="classImu.html#a7e138ebf6af3c9008b1607f777c263ec">BIT_CTRL1_XL_FS1_XL</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    reg[<a class="code" href="classImu.html#a1ca1aaf664c7fc758b0bfce2db82c901">BIT_CTRL1_XL_FS0_XL</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// LPF2を有効</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    reg[<a class="code" href="classImu.html#a2c4b3614133fa63f1f9d68c4b0d3eb58">BIT_CTRL1_XL_LPF2_XL_EN</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// CTRL1_XLを反映</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a87539ee148ca9c308d50d062403f462e">REG_CTRL1_XL</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#a072ddb22caa61ff8e0469d3faa8f0823">REG_CTRL8_XL</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// フィルタをLow pass, ODR/10に設定</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    reg[<a class="code" href="classImu.html#a6457881de4f643deef3d3a5ff732b56d">BIT_CTRL8_XL_HPCF_XL_2</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    reg[<a class="code" href="classImu.html#ad3d0283012b16ba6403bebe46ea6ef56">BIT_CTRL8_XL_HPCF_XL_1</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    reg[<a class="code" href="classImu.html#ab221096a2acce79591ed4fc4a09569a0">BIT_CTRL8_XL_HPCF_XL_0</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    reg[<a class="code" href="classImu.html#a53f13268cb9f37e431b3a2160330a5da">BIT_CTRL8_XL_FASTSETTL_MODE_XL</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// CTRL8_XLを反映</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a072ddb22caa61ff8e0469d3faa8f0823">REG_CTRL8_XL</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#a551298c7f232b1ad9f8752e3a5d09232">REG_CTRL6_C</a>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// オフセットの重みを2^-10 g/LSBに設定</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    reg[<a class="code" href="classImu.html#aa4a0f14a0d5b720e95185e1dca1f33ba">BIT_CTRL6_C_USR_OFF_W</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// CTRL6_Cを反映</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a551298c7f232b1ad9f8752e3a5d09232">REG_CTRL6_C</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#a8514b20f08893ed178c6dd0648169297">REG_CTRL7_G</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// オフセットを有効</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    reg[<a class="code" href="classImu.html#ad35aadcfb10e7cce13c6ad25bdf40671">BIT_CTRL7_G_USR_OFF_ON_OUT</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// CTRL7_Gを反映</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a8514b20f08893ed178c6dd0648169297">REG_CTRL7_G</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#af03ac1be37e3ef1fa5915f0275b38269">REG_X_OFS_USR</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code" href="classImu.html#a9760cd93503527afadbe86de9af7c7c2">DAT_X_OFS_USR</a>));</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a457919e0c32e762c5a1e1ef2c2056504">REG_Y_OFS_USR</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code" href="classImu.html#a67e2590ed709520e722dee9e15b5734d">DAT_Y_OFS_USR</a>));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a33f6948b1f3fe92a4d10434aa4c836e0">REG_Z_OFS_USR</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code" href="classImu.html#a4dcb587aad81bcf672b827571a626d2e">DAT_Z_OFS_USR</a>));</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// 角速度計の設定</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#add3252f670ae91cc97081d194151042c">REG_CTRL2_G</a>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// 出力レートを1.66kHzに設定</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    reg[<a class="code" href="classImu.html#ab20f0eccbdfcf51754de0bd06b079d0a">BIT_CTRL2_G_ODR_G3</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    reg[<a class="code" href="classImu.html#a74167121c2e474b16052e9e86379d325">BIT_CTRL2_G_ODR_G2</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    reg[<a class="code" href="classImu.html#a4e6eb36cc8b3180ded6464b0e019e293">BIT_CTRL2_G_ODR_G1</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    reg[<a class="code" href="classImu.html#ac0e4b5f64dfc22901864481b515515dd">BIT_CTRL2_G_ODR_G0</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// スケールを+-2000dpsに設定</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    reg[<a class="code" href="classImu.html#aa186fe3906c6980b6ba1e667558d7a9d">BIT_CTRL2_G_FS1_G</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    reg[<a class="code" href="classImu.html#ae9b0a9e77d28ec1a59d12a42cdfb9a22">BIT_CTRL2_G_FS0_G</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    reg[<a class="code" href="classImu.html#aca5b93445be82d95555925293300d417">BIT_CTRL2_G_FS_125</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    reg[<a class="code" href="classImu.html#a45d5ce9dd7fa466a26855c372dc37928">BIT_CTRL2_G_FS_4000</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// CTRL2_Gを反映</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#add3252f670ae91cc97081d194151042c">REG_CTRL2_G</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#aae97907b426cfed02d56cbc94d8aac0b">REG_CTRL4_C</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// LPF1を有効</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    reg[<a class="code" href="classImu.html#a1b3d6c0550a9330a0194e1b48abfae96">BIT_CTRL4_C_LPF1_SEL_G</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// CTRL4_Cを反映</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#aae97907b426cfed02d56cbc94d8aac0b">REG_CTRL4_C</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    reg = <a class="code" href="classImu.html#a1526f585733585c0275a1120fd6b82ad">read_byte</a>(<a class="code" href="classImu.html#a551298c7f232b1ad9f8752e3a5d09232">REG_CTRL6_C</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    reg[<a class="code" href="classImu.html#a6318aab0eb086fb8e57a8b3b9019105e">BIT_CTRL6_C_FTYPE_2</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    reg[<a class="code" href="classImu.html#a6c0f79b21546b4525af37e1f20ba72d0">BIT_CTRL6_C_FTYPE_1</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    reg[<a class="code" href="classImu.html#a0fc4cc324a79fc27b405d90ff01d42a3">BIT_CTRL6_C_FTYPE_0</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// CTRL6_Cを反映</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a551298c7f232b1ad9f8752e3a5d09232">REG_CTRL6_C</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(reg.to_ulong()));</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="classImu.html#a0660138107b74ceb001a5691eb1db4d0">  223</a></span>&#160;  <a class="code" href="classImu.html#a0660138107b74ceb001a5691eb1db4d0">~Imu</a>() {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    free(<a class="code" href="classImu.html#a657f1abf07fbe1dec5e24c06f02103ae">tx_buffer_</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    free(<a class="code" href="classImu.html#a82c6d5e61f740657651a073fb46d08d8">rx_buffer_</a>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="classImu.html#aaf6f6cc86577b4b7b96cc205d013a419">  228</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classImu.html#aaf6f6cc86577b4b7b96cc205d013a419">update</a>() {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keyword">auto</span> trans = <a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>.<a class="code" href="classSpi.html#ade7f363df8128f984a04896748284790">transaction</a>(<a class="code" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">index_</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    trans-&gt;flags = 0;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    trans-&gt;tx_buffer = <a class="code" href="classImu.html#a657f1abf07fbe1dec5e24c06f02103ae">tx_buffer_</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    trans-&gt;rx_buffer = <a class="code" href="classImu.html#a82c6d5e61f740657651a073fb46d08d8">rx_buffer_</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    trans-&gt;addr = <a class="code" href="classImu.html#ae0af4a19b2dfcb0dbafbe9bad0658cb1">REG_OUTX_L_G</a> | 0x80;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    trans-&gt;length = 12 * 8;  <span class="comment">// OUTX_L_G(22h) ~ OUTZ_H_A(2Dh)</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    trans-&gt;rxlength = trans-&gt;length;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordtype">bool</span> ret = <a class="code" href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">spi_</a>.<a class="code" href="classSpi.html#a91c0eeec99491ce1392baecdb8ec7495">transmit</a>(<a class="code" href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">index_</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keyword">auto</span> res = <span class="keyword">reinterpret_cast&lt;</span>int16_t *<span class="keyword">&gt;</span>(<a class="code" href="classImu.html#a82c6d5e61f740657651a073fb46d08d8">rx_buffer_</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>.<a class="code" href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">x</a> = res[0];</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>.<a class="code" href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">y</a> = res[1];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>.<a class="code" href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">z</a> = res[2];</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>.<a class="code" href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">x</a> = res[3];</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>.<a class="code" href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">y</a> = res[4];</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>.<a class="code" href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">z</a> = res[5];</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <a class="code" href="classImu.html#ab8a10f812aee545be01a6c561179c9b6">gyro_</a>.<a class="code" href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">x</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>.<a class="code" href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">x</a>) * <a class="code" href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">ANGULAR_RATE_SENSITIVITY</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="classImu.html#ab8a10f812aee545be01a6c561179c9b6">gyro_</a>.<a class="code" href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">y</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>.<a class="code" href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">y</a>) * <a class="code" href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">ANGULAR_RATE_SENSITIVITY</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="classImu.html#ab8a10f812aee545be01a6c561179c9b6">gyro_</a>.<a class="code" href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">z</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>.<a class="code" href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">z</a>) * <a class="code" href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">ANGULAR_RATE_SENSITIVITY</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="classImu.html#ac5e55f4beb879b3405d28f84b74224dd">accel_</a>.<a class="code" href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">x</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>.<a class="code" href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">x</a>) * <a class="code" href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">LINEAR_ACCELERATION_SENSITIVITY</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <a class="code" href="classImu.html#ac5e55f4beb879b3405d28f84b74224dd">accel_</a>.<a class="code" href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">y</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>.<a class="code" href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">y</a>) * <a class="code" href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">LINEAR_ACCELERATION_SENSITIVITY</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <a class="code" href="classImu.html#ac5e55f4beb879b3405d28f84b74224dd">accel_</a>.<a class="code" href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">z</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>.<a class="code" href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">z</a>) * <a class="code" href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">LINEAR_ACCELERATION_SENSITIVITY</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classImu.html#ade9a2a72dae1cd27b4628c79f1377799">  256</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structImu_1_1Axis.html">Axis&lt;int16_t&gt;</a> &amp;<a class="code" href="classImu.html#ade9a2a72dae1cd27b4628c79f1377799">raw_angular_rate</a>() { <span class="keywordflow">return</span> <a class="code" href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">raw_gyro_</a>; }</div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classImu.html#a909527a990075316d591506d8f2ff224">  257</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structImu_1_1Axis.html">Axis&lt;int16_t&gt;</a> &amp;<a class="code" href="classImu.html#a909527a990075316d591506d8f2ff224">raw_linear_acceleration</a>() { <span class="keywordflow">return</span> <a class="code" href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">raw_accel_</a>; }</div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classImu.html#a08ed354e7016a056f8bae1a64ce9f83b">  258</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structImu_1_1Axis.html">Axis&lt;float&gt;</a> &amp;<a class="code" href="classImu.html#a08ed354e7016a056f8bae1a64ce9f83b">angular_rate</a>() { <span class="keywordflow">return</span> <a class="code" href="classImu.html#ab8a10f812aee545be01a6c561179c9b6">gyro_</a>; }</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classImu.html#a7ba0e32fc91b18244ec38e3e72d139b7">  259</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structImu_1_1Axis.html">Axis&lt;float&gt;</a> &amp;<a class="code" href="classImu.html#a7ba0e32fc91b18244ec38e3e72d139b7">linear_acceleration</a>() { <span class="keywordflow">return</span> <a class="code" href="classImu.html#ac5e55f4beb879b3405d28f84b74224dd">accel_</a>; }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classImu.html#a5e00f8dec62b5a5301eda6f288eb7102">  261</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classImu.html#a5e00f8dec62b5a5301eda6f288eb7102">offset</a>(<span class="keywordtype">int</span> n) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> output_data_rate = 1660;                                <span class="comment">// [Hz]</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> user_offset_weight = 1000.0f * std::pow(2.0f, -10.0f);  <span class="comment">// [mg/LSB]</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> delay = 1.0f / output_data_rate;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">float</span> sum_x = 0.0f, sum_x_2 = 0.0f;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="structImu_1_1Axis.html">Axis&lt;float&gt;</a> accel_coeff{}, accel_inter{}, gyro_coeff{}, gyro_inter{};</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="structImu_1_1Axis.html">Axis&lt;float&gt;</a> sum_accel_xy{}, sum_accel_y{}, sum_gyro_xy{}, sum_gyro_y{};</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="structImu_1_1Axis.html">Axis&lt;int8_t&gt;</a> accel_offset{};</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// 現在の設定をクリア</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#af03ac1be37e3ef1fa5915f0275b38269">REG_X_OFS_USR</a>, 0);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a457919e0c32e762c5a1e1ef2c2056504">REG_Y_OFS_USR</a>, 0);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a33f6948b1f3fe92a4d10434aa4c836e0">REG_Z_OFS_USR</a>, 0);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      ets_delay_us(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(delay * 1000&#39;000.0f));</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="classImu.html#aaf6f6cc86577b4b7b96cc205d013a419">update</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span> x = delay * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(i);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keyword">auto</span> &amp;accel = <a class="code" href="classImu.html#a909527a990075316d591506d8f2ff224">raw_linear_acceleration</a>();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keyword">auto</span> accel_x = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(accel.x) * <a class="code" href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">LINEAR_ACCELERATION_SENSITIVITY</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keyword">auto</span> accel_y = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(accel.y) * <a class="code" href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">LINEAR_ACCELERATION_SENSITIVITY</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keyword">auto</span> accel_z = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(accel.z) * <a class="code" href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">LINEAR_ACCELERATION_SENSITIVITY</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keyword">auto</span> &amp;gyro = <a class="code" href="classImu.html#ade9a2a72dae1cd27b4628c79f1377799">raw_angular_rate</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keyword">auto</span> gyro_x = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro.x) * <a class="code" href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">ANGULAR_RATE_SENSITIVITY</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keyword">auto</span> gyro_y = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro.y) * <a class="code" href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">ANGULAR_RATE_SENSITIVITY</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keyword">auto</span> gyro_z = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro.z) * <a class="code" href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">ANGULAR_RATE_SENSITIVITY</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      sum_accel_y.x += accel_x;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      sum_accel_y.y += accel_y;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      sum_accel_y.z += accel_z;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      sum_accel_xy.x += x * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(accel_x);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      sum_accel_xy.y += x * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(accel_y);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      sum_accel_xy.z += x * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(accel_z);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      sum_gyro_y.x += <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro_x);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      sum_gyro_y.y += <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro_y);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      sum_gyro_y.z += <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro_z);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      sum_gyro_xy.x += x * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro_x);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      sum_gyro_xy.y += x * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro_y);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      sum_gyro_xy.z += x * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(gyro_z);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      sum_x += x;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      sum_x_2 += std::pow(x, 2.0f);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keyword">auto</span> coeff_a = [&amp;](<span class="keywordtype">float</span> sum_xy, <span class="keywordtype">float</span> sum_y) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(n) * sum_xy - sum_x * sum_y) /</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;             (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(n) * sum_x_2 - std::pow(sum_x, 2.0f));</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    };</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">auto</span> inter_b = [&amp;](<span class="keywordtype">float</span> sum_xy, <span class="keywordtype">float</span> sum_y) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">return</span> (sum_x_2 * sum_y - sum_xy * sum_x) / (<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(n) * sum_x_2 - std::pow(sum_x, 2.0f));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    };</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    accel_coeff.x = coeff_a(sum_accel_xy.x, sum_accel_y.x);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    accel_coeff.y = coeff_a(sum_accel_xy.y, sum_accel_y.y);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    accel_coeff.z = coeff_a(sum_accel_xy.z, sum_accel_y.z);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    accel_inter.x = inter_b(sum_accel_xy.x, sum_accel_y.x);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    accel_inter.y = inter_b(sum_accel_xy.y, sum_accel_y.y);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    accel_inter.z = inter_b(sum_accel_xy.z, sum_accel_y.z);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    accel_offset.x = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(accel_inter.x / user_offset_weight);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    accel_offset.y = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(accel_inter.y / user_offset_weight);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    accel_offset.z = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>((accel_inter.z - 1000.0f) / user_offset_weight);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#af03ac1be37e3ef1fa5915f0275b38269">REG_X_OFS_USR</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(accel_offset.x));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a457919e0c32e762c5a1e1ef2c2056504">REG_Y_OFS_USR</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(accel_offset.y));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">write_byte</a>(<a class="code" href="classImu.html#a33f6948b1f3fe92a4d10434aa4c836e0">REG_Z_OFS_USR</a>, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(accel_offset.z));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    gyro_coeff.x = coeff_a(sum_gyro_xy.x, sum_gyro_y.x);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    gyro_coeff.y = coeff_a(sum_gyro_xy.y, sum_gyro_y.y);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    gyro_coeff.z = coeff_a(sum_gyro_xy.z, sum_gyro_y.z);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    gyro_inter.x = inter_b(sum_gyro_xy.x, sum_gyro_y.x);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    gyro_inter.y = inter_b(sum_gyro_xy.y, sum_gyro_y.y);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    gyro_inter.z = inter_b(sum_gyro_xy.z, sum_gyro_y.z);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    printf(<span class="stringliteral">&quot;Accel X: %f x + %f\n&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(accel_coeff.x), <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(accel_inter.x));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    printf(<span class="stringliteral">&quot;Accel Y: %f x + %f\n&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(accel_coeff.y), <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(accel_inter.y));</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    printf(<span class="stringliteral">&quot;Accel Z: %f x + %f\n&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(accel_coeff.z), <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(accel_inter.z));</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    printf(<span class="stringliteral">&quot;%d, %d, %d\n&quot;</span>, accel_offset.x, accel_offset.y, accel_offset.z);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    printf(<span class="stringliteral">&quot;Gyro X: %f x + %f\n&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(gyro_coeff.x), <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(gyro_inter.x));</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    printf(<span class="stringliteral">&quot;Gyro Y: %f x + %f\n&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(gyro_coeff.y), <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(gyro_inter.y));</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    printf(<span class="stringliteral">&quot;Gyro Z: %f x + %f\n&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(gyro_coeff.z), <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(gyro_inter.z));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classImu.html#aaca064f0d7c9fc0b98eef27af05cf0f4">  341</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classImu.html#aaca064f0d7c9fc0b98eef27af05cf0f4">calibration</a>() { <a class="code" href="classImu.html#a5e00f8dec62b5a5301eda6f288eb7102">offset</a>(10000); }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;};</div>
<div class="ttc" id="aclassImu_html"><div class="ttname"><a href="classImu.html">Imu</a></div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00017">imu.h:17</a></div></div>
<div class="ttc" id="aclassImu_html_a0660138107b74ceb001a5691eb1db4d0"><div class="ttname"><a href="classImu.html#a0660138107b74ceb001a5691eb1db4d0">Imu::~Imu</a></div><div class="ttdeci">~Imu()</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00223">imu.h:223</a></div></div>
<div class="ttc" id="aclassImu_html_a072ddb22caa61ff8e0469d3faa8f0823"><div class="ttname"><a href="classImu.html#a072ddb22caa61ff8e0469d3faa8f0823">Imu::REG_CTRL8_XL</a></div><div class="ttdeci">static constexpr uint8_t REG_CTRL8_XL</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00078">imu.h:78</a></div></div>
<div class="ttc" id="aclassImu_html_a08ed354e7016a056f8bae1a64ce9f83b"><div class="ttname"><a href="classImu.html#a08ed354e7016a056f8bae1a64ce9f83b">Imu::angular_rate</a></div><div class="ttdeci">const Axis&lt; float &gt; &amp; angular_rate()</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00258">imu.h:258</a></div></div>
<div class="ttc" id="aclassImu_html_a0fc4cc324a79fc27b405d90ff01d42a3"><div class="ttname"><a href="classImu.html#a0fc4cc324a79fc27b405d90ff01d42a3">Imu::BIT_CTRL6_C_FTYPE_0</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL6_C_FTYPE_0</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00073">imu.h:73</a></div></div>
<div class="ttc" id="aclassImu_html_a1526f585733585c0275a1120fd6b82ad"><div class="ttname"><a href="classImu.html#a1526f585733585c0275a1120fd6b82ad">Imu::read_byte</a></div><div class="ttdeci">uint8_t read_byte(uint8_t reg)</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00106">imu.h:106</a></div></div>
<div class="ttc" id="aclassImu_html_a1b180bfff5e928c28a83709fd3da1641"><div class="ttname"><a href="classImu.html#a1b180bfff5e928c28a83709fd3da1641">Imu::write_byte</a></div><div class="ttdeci">bool write_byte(uint8_t reg, uint8_t data)</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00118">imu.h:118</a></div></div>
<div class="ttc" id="aclassImu_html_a1b3d6c0550a9330a0194e1b48abfae96"><div class="ttname"><a href="classImu.html#a1b3d6c0550a9330a0194e1b48abfae96">Imu::BIT_CTRL4_C_LPF1_SEL_G</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL4_C_LPF1_SEL_G</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00067">imu.h:67</a></div></div>
<div class="ttc" id="aclassImu_html_a1ca1aaf664c7fc758b0bfce2db82c901"><div class="ttname"><a href="classImu.html#a1ca1aaf664c7fc758b0bfce2db82c901">Imu::BIT_CTRL1_XL_FS0_XL</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL1_XL_FS0_XL</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00049">imu.h:49</a></div></div>
<div class="ttc" id="aclassImu_html_a2c4b3614133fa63f1f9d68c4b0d3eb58"><div class="ttname"><a href="classImu.html#a2c4b3614133fa63f1f9d68c4b0d3eb58">Imu::BIT_CTRL1_XL_LPF2_XL_EN</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL1_XL_LPF2_XL_EN</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00050">imu.h:50</a></div></div>
<div class="ttc" id="aclassImu_html_a33185f44d1a2ee3501df892bfdceeef4"><div class="ttname"><a href="classImu.html#a33185f44d1a2ee3501df892bfdceeef4">Imu::BIT_CTRL1_XL_ODR_XL3</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL1_XL_ODR_XL3</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00044">imu.h:44</a></div></div>
<div class="ttc" id="aclassImu_html_a33f6948b1f3fe92a4d10434aa4c836e0"><div class="ttname"><a href="classImu.html#a33f6948b1f3fe92a4d10434aa4c836e0">Imu::REG_Z_OFS_USR</a></div><div class="ttdeci">static constexpr uint8_t REG_Z_OFS_USR</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00091">imu.h:91</a></div></div>
<div class="ttc" id="aclassImu_html_a350333553e72013d1ac56a2b620b62a4"><div class="ttname"><a href="classImu.html#a350333553e72013d1ac56a2b620b62a4">Imu::BIT_CTRL3_C_SW_RESET</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL3_C_SW_RESET</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00064">imu.h:64</a></div></div>
<div class="ttc" id="aclassImu_html_a397c6225cd91daf4682b0dc9c24a8811"><div class="ttname"><a href="classImu.html#a397c6225cd91daf4682b0dc9c24a8811">Imu::index_</a></div><div class="ttdeci">int index_</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00031">imu.h:31</a></div></div>
<div class="ttc" id="aclassImu_html_a457919e0c32e762c5a1e1ef2c2056504"><div class="ttname"><a href="classImu.html#a457919e0c32e762c5a1e1ef2c2056504">Imu::REG_Y_OFS_USR</a></div><div class="ttdeci">static constexpr uint8_t REG_Y_OFS_USR</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00090">imu.h:90</a></div></div>
<div class="ttc" id="aclassImu_html_a45d5ce9dd7fa466a26855c372dc37928"><div class="ttname"><a href="classImu.html#a45d5ce9dd7fa466a26855c372dc37928">Imu::BIT_CTRL2_G_FS_4000</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL2_G_FS_4000</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00060">imu.h:60</a></div></div>
<div class="ttc" id="aclassImu_html_a4dcb587aad81bcf672b827571a626d2e"><div class="ttname"><a href="classImu.html#a4dcb587aad81bcf672b827571a626d2e">Imu::DAT_Z_OFS_USR</a></div><div class="ttdeci">static constexpr int8_t DAT_Z_OFS_USR</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00104">imu.h:104</a></div></div>
<div class="ttc" id="aclassImu_html_a4e6eb36cc8b3180ded6464b0e019e293"><div class="ttname"><a href="classImu.html#a4e6eb36cc8b3180ded6464b0e019e293">Imu::BIT_CTRL2_G_ODR_G1</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL2_G_ODR_G1</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00055">imu.h:55</a></div></div>
<div class="ttc" id="aclassImu_html_a509fd7a1dcc9857b7e031aef58cce136"><div class="ttname"><a href="classImu.html#a509fd7a1dcc9857b7e031aef58cce136">Imu::REG_WHO_AM_I</a></div><div class="ttdeci">static constexpr uint8_t REG_WHO_AM_I</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00040">imu.h:40</a></div></div>
<div class="ttc" id="aclassImu_html_a535be22e7004297f3be9c6f7be658748"><div class="ttname"><a href="classImu.html#a535be22e7004297f3be9c6f7be658748">Imu::Imu</a></div><div class="ttdeci">Imu(Spi &amp;spi, gpio_num_t spics_io_num)</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00132">imu.h:132</a></div></div>
<div class="ttc" id="aclassImu_html_a53f13268cb9f37e431b3a2160330a5da"><div class="ttname"><a href="classImu.html#a53f13268cb9f37e431b3a2160330a5da">Imu::BIT_CTRL8_XL_FASTSETTL_MODE_XL</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL8_XL_FASTSETTL_MODE_XL</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00082">imu.h:82</a></div></div>
<div class="ttc" id="aclassImu_html_a551298c7f232b1ad9f8752e3a5d09232"><div class="ttname"><a href="classImu.html#a551298c7f232b1ad9f8752e3a5d09232">Imu::REG_CTRL6_C</a></div><div class="ttdeci">static constexpr uint8_t REG_CTRL6_C</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00069">imu.h:69</a></div></div>
<div class="ttc" id="aclassImu_html_a5e00f8dec62b5a5301eda6f288eb7102"><div class="ttname"><a href="classImu.html#a5e00f8dec62b5a5301eda6f288eb7102">Imu::offset</a></div><div class="ttdeci">void offset(int n)</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00261">imu.h:261</a></div></div>
<div class="ttc" id="aclassImu_html_a6318aab0eb086fb8e57a8b3b9019105e"><div class="ttname"><a href="classImu.html#a6318aab0eb086fb8e57a8b3b9019105e">Imu::BIT_CTRL6_C_FTYPE_2</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL6_C_FTYPE_2</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00071">imu.h:71</a></div></div>
<div class="ttc" id="aclassImu_html_a6457881de4f643deef3d3a5ff732b56d"><div class="ttname"><a href="classImu.html#a6457881de4f643deef3d3a5ff732b56d">Imu::BIT_CTRL8_XL_HPCF_XL_2</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL8_XL_HPCF_XL_2</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00079">imu.h:79</a></div></div>
<div class="ttc" id="aclassImu_html_a657f1abf07fbe1dec5e24c06f02103ae"><div class="ttname"><a href="classImu.html#a657f1abf07fbe1dec5e24c06f02103ae">Imu::tx_buffer_</a></div><div class="ttdeci">uint8_t * tx_buffer_</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00032">imu.h:32</a></div></div>
<div class="ttc" id="aclassImu_html_a67e2590ed709520e722dee9e15b5734d"><div class="ttname"><a href="classImu.html#a67e2590ed709520e722dee9e15b5734d">Imu::DAT_Y_OFS_USR</a></div><div class="ttdeci">static constexpr int8_t DAT_Y_OFS_USR</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00103">imu.h:103</a></div></div>
<div class="ttc" id="aclassImu_html_a6a3e0e77d91b646be96c6c821908ca10"><div class="ttname"><a href="classImu.html#a6a3e0e77d91b646be96c6c821908ca10">Imu::BIT_CTRL1_XL_ODR_XL2</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL1_XL_ODR_XL2</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00045">imu.h:45</a></div></div>
<div class="ttc" id="aclassImu_html_a6c0f79b21546b4525af37e1f20ba72d0"><div class="ttname"><a href="classImu.html#a6c0f79b21546b4525af37e1f20ba72d0">Imu::BIT_CTRL6_C_FTYPE_1</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL6_C_FTYPE_1</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00072">imu.h:72</a></div></div>
<div class="ttc" id="aclassImu_html_a6dc0576929ab6bbe050110f1ad661d21"><div class="ttname"><a href="classImu.html#a6dc0576929ab6bbe050110f1ad661d21">Imu::BUFFER_SIZE</a></div><div class="ttdeci">static constexpr size_t BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00037">imu.h:37</a></div></div>
<div class="ttc" id="aclassImu_html_a74167121c2e474b16052e9e86379d325"><div class="ttname"><a href="classImu.html#a74167121c2e474b16052e9e86379d325">Imu::BIT_CTRL2_G_ODR_G2</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL2_G_ODR_G2</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00054">imu.h:54</a></div></div>
<div class="ttc" id="aclassImu_html_a79822fc7e16c3d138e0db26fd7f2dbaf"><div class="ttname"><a href="classImu.html#a79822fc7e16c3d138e0db26fd7f2dbaf">Imu::BIT_CTRL9_XL_I3C_DISABLE</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL9_XL_I3C_DISABLE</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00085">imu.h:85</a></div></div>
<div class="ttc" id="aclassImu_html_a7a1cd874ed85e8a9041a33f693729b6e"><div class="ttname"><a href="classImu.html#a7a1cd874ed85e8a9041a33f693729b6e">Imu::BIT_CTRL1_XL_ODR_XL1</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL1_XL_ODR_XL1</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00046">imu.h:46</a></div></div>
<div class="ttc" id="aclassImu_html_a7ba0e32fc91b18244ec38e3e72d139b7"><div class="ttname"><a href="classImu.html#a7ba0e32fc91b18244ec38e3e72d139b7">Imu::linear_acceleration</a></div><div class="ttdeci">const Axis&lt; float &gt; &amp; linear_acceleration()</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00259">imu.h:259</a></div></div>
<div class="ttc" id="aclassImu_html_a7e138ebf6af3c9008b1607f777c263ec"><div class="ttname"><a href="classImu.html#a7e138ebf6af3c9008b1607f777c263ec">Imu::BIT_CTRL1_XL_FS1_XL</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL1_XL_FS1_XL</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00048">imu.h:48</a></div></div>
<div class="ttc" id="aclassImu_html_a82c6d5e61f740657651a073fb46d08d8"><div class="ttname"><a href="classImu.html#a82c6d5e61f740657651a073fb46d08d8">Imu::rx_buffer_</a></div><div class="ttdeci">uint8_t * rx_buffer_</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00032">imu.h:32</a></div></div>
<div class="ttc" id="aclassImu_html_a8514b20f08893ed178c6dd0648169297"><div class="ttname"><a href="classImu.html#a8514b20f08893ed178c6dd0648169297">Imu::REG_CTRL7_G</a></div><div class="ttdeci">static constexpr uint8_t REG_CTRL7_G</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00075">imu.h:75</a></div></div>
<div class="ttc" id="aclassImu_html_a87539ee148ca9c308d50d062403f462e"><div class="ttname"><a href="classImu.html#a87539ee148ca9c308d50d062403f462e">Imu::REG_CTRL1_XL</a></div><div class="ttdeci">static constexpr uint8_t REG_CTRL1_XL</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00043">imu.h:43</a></div></div>
<div class="ttc" id="aclassImu_html_a909527a990075316d591506d8f2ff224"><div class="ttname"><a href="classImu.html#a909527a990075316d591506d8f2ff224">Imu::raw_linear_acceleration</a></div><div class="ttdeci">const Axis&lt; int16_t &gt; &amp; raw_linear_acceleration()</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00257">imu.h:257</a></div></div>
<div class="ttc" id="aclassImu_html_a9760cd93503527afadbe86de9af7c7c2"><div class="ttname"><a href="classImu.html#a9760cd93503527afadbe86de9af7c7c2">Imu::DAT_X_OFS_USR</a></div><div class="ttdeci">static constexpr int8_t DAT_X_OFS_USR</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00102">imu.h:102</a></div></div>
<div class="ttc" id="aclassImu_html_a9bd97e6c276a7c9306c964030b2bf6e2"><div class="ttname"><a href="classImu.html#a9bd97e6c276a7c9306c964030b2bf6e2">Imu::LINEAR_ACCELERATION_SENSITIVITY</a></div><div class="ttdeci">static constexpr float LINEAR_ACCELERATION_SENSITIVITY</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00020">imu.h:20</a></div></div>
<div class="ttc" id="aclassImu_html_a9daf881a4f2657762eff013ccabfd5b4"><div class="ttname"><a href="classImu.html#a9daf881a4f2657762eff013ccabfd5b4">Imu::BIT_CTRL3_C_BDU</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL3_C_BDU</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00063">imu.h:63</a></div></div>
<div class="ttc" id="aclassImu_html_aa186fe3906c6980b6ba1e667558d7a9d"><div class="ttname"><a href="classImu.html#aa186fe3906c6980b6ba1e667558d7a9d">Imu::BIT_CTRL2_G_FS1_G</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL2_G_FS1_G</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00057">imu.h:57</a></div></div>
<div class="ttc" id="aclassImu_html_aa4a0f14a0d5b720e95185e1dca1f33ba"><div class="ttname"><a href="classImu.html#aa4a0f14a0d5b720e95185e1dca1f33ba">Imu::BIT_CTRL6_C_USR_OFF_W</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL6_C_USR_OFF_W</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00070">imu.h:70</a></div></div>
<div class="ttc" id="aclassImu_html_aaca064f0d7c9fc0b98eef27af05cf0f4"><div class="ttname"><a href="classImu.html#aaca064f0d7c9fc0b98eef27af05cf0f4">Imu::calibration</a></div><div class="ttdeci">void calibration()</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00341">imu.h:341</a></div></div>
<div class="ttc" id="aclassImu_html_aae97907b426cfed02d56cbc94d8aac0b"><div class="ttname"><a href="classImu.html#aae97907b426cfed02d56cbc94d8aac0b">Imu::REG_CTRL4_C</a></div><div class="ttdeci">static constexpr uint8_t REG_CTRL4_C</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00066">imu.h:66</a></div></div>
<div class="ttc" id="aclassImu_html_aaf6f6cc86577b4b7b96cc205d013a419"><div class="ttname"><a href="classImu.html#aaf6f6cc86577b4b7b96cc205d013a419">Imu::update</a></div><div class="ttdeci">bool update()</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00228">imu.h:228</a></div></div>
<div class="ttc" id="aclassImu_html_ab20f0eccbdfcf51754de0bd06b079d0a"><div class="ttname"><a href="classImu.html#ab20f0eccbdfcf51754de0bd06b079d0a">Imu::BIT_CTRL2_G_ODR_G3</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL2_G_ODR_G3</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00053">imu.h:53</a></div></div>
<div class="ttc" id="aclassImu_html_ab221096a2acce79591ed4fc4a09569a0"><div class="ttname"><a href="classImu.html#ab221096a2acce79591ed4fc4a09569a0">Imu::BIT_CTRL8_XL_HPCF_XL_0</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL8_XL_HPCF_XL_0</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00081">imu.h:81</a></div></div>
<div class="ttc" id="aclassImu_html_ab3e945eb57d4203e7ed501e589eee29a"><div class="ttname"><a href="classImu.html#ab3e945eb57d4203e7ed501e589eee29a">Imu::ANGULAR_RATE_SENSITIVITY</a></div><div class="ttdeci">static constexpr float ANGULAR_RATE_SENSITIVITY</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00019">imu.h:19</a></div></div>
<div class="ttc" id="aclassImu_html_ab61dcbc2e270485c0d167c3346a20a86"><div class="ttname"><a href="classImu.html#ab61dcbc2e270485c0d167c3346a20a86">Imu::BIT_CTRL1_XL_ODR_XL0</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL1_XL_ODR_XL0</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00047">imu.h:47</a></div></div>
<div class="ttc" id="aclassImu_html_ab8a10f812aee545be01a6c561179c9b6"><div class="ttname"><a href="classImu.html#ab8a10f812aee545be01a6c561179c9b6">Imu::gyro_</a></div><div class="ttdeci">Axis&lt; float &gt; gyro_</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00034">imu.h:34</a></div></div>
<div class="ttc" id="aclassImu_html_abf6055bbdaaa91b3bdc67d577c682f25"><div class="ttname"><a href="classImu.html#abf6055bbdaaa91b3bdc67d577c682f25">Imu::DAT_WHO_AM_I</a></div><div class="ttdeci">static constexpr uint8_t DAT_WHO_AM_I</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00041">imu.h:41</a></div></div>
<div class="ttc" id="aclassImu_html_ac0e4b5f64dfc22901864481b515515dd"><div class="ttname"><a href="classImu.html#ac0e4b5f64dfc22901864481b515515dd">Imu::BIT_CTRL2_G_ODR_G0</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL2_G_ODR_G0</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00056">imu.h:56</a></div></div>
<div class="ttc" id="aclassImu_html_ac5e55f4beb879b3405d28f84b74224dd"><div class="ttname"><a href="classImu.html#ac5e55f4beb879b3405d28f84b74224dd">Imu::accel_</a></div><div class="ttdeci">Axis&lt; float &gt; accel_</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00034">imu.h:34</a></div></div>
<div class="ttc" id="aclassImu_html_ac782d7ccb87c0754079f217724c991a7"><div class="ttname"><a href="classImu.html#ac782d7ccb87c0754079f217724c991a7">Imu::REG_CTRL3_C</a></div><div class="ttdeci">static constexpr uint8_t REG_CTRL3_C</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00062">imu.h:62</a></div></div>
<div class="ttc" id="aclassImu_html_ac9aa68678c4d13d35ad22172db788ca0"><div class="ttname"><a href="classImu.html#ac9aa68678c4d13d35ad22172db788ca0">Imu::spi_</a></div><div class="ttdeci">Spi &amp; spi_</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00030">imu.h:30</a></div></div>
<div class="ttc" id="aclassImu_html_aca5b93445be82d95555925293300d417"><div class="ttname"><a href="classImu.html#aca5b93445be82d95555925293300d417">Imu::BIT_CTRL2_G_FS_125</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL2_G_FS_125</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00059">imu.h:59</a></div></div>
<div class="ttc" id="aclassImu_html_acbacfd910a018428a362a44f05f7f445"><div class="ttname"><a href="classImu.html#acbacfd910a018428a362a44f05f7f445">Imu::REG_CTRL9_XL</a></div><div class="ttdeci">static constexpr uint8_t REG_CTRL9_XL</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00084">imu.h:84</a></div></div>
<div class="ttc" id="aclassImu_html_ad35aadcfb10e7cce13c6ad25bdf40671"><div class="ttname"><a href="classImu.html#ad35aadcfb10e7cce13c6ad25bdf40671">Imu::BIT_CTRL7_G_USR_OFF_ON_OUT</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL7_G_USR_OFF_ON_OUT</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00076">imu.h:76</a></div></div>
<div class="ttc" id="aclassImu_html_ad3d0283012b16ba6403bebe46ea6ef56"><div class="ttname"><a href="classImu.html#ad3d0283012b16ba6403bebe46ea6ef56">Imu::BIT_CTRL8_XL_HPCF_XL_1</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL8_XL_HPCF_XL_1</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00080">imu.h:80</a></div></div>
<div class="ttc" id="aclassImu_html_ad5903bdf43e3d967d504d2cee8a50fb2"><div class="ttname"><a href="classImu.html#ad5903bdf43e3d967d504d2cee8a50fb2">Imu::raw_accel_</a></div><div class="ttdeci">Axis&lt; int16_t &gt; raw_accel_</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00033">imu.h:33</a></div></div>
<div class="ttc" id="aclassImu_html_add3252f670ae91cc97081d194151042c"><div class="ttname"><a href="classImu.html#add3252f670ae91cc97081d194151042c">Imu::REG_CTRL2_G</a></div><div class="ttdeci">static constexpr uint8_t REG_CTRL2_G</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00052">imu.h:52</a></div></div>
<div class="ttc" id="aclassImu_html_ade9a2a72dae1cd27b4628c79f1377799"><div class="ttname"><a href="classImu.html#ade9a2a72dae1cd27b4628c79f1377799">Imu::raw_angular_rate</a></div><div class="ttdeci">const Axis&lt; int16_t &gt; &amp; raw_angular_rate()</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00256">imu.h:256</a></div></div>
<div class="ttc" id="aclassImu_html_ae0af4a19b2dfcb0dbafbe9bad0658cb1"><div class="ttname"><a href="classImu.html#ae0af4a19b2dfcb0dbafbe9bad0658cb1">Imu::REG_OUTX_L_G</a></div><div class="ttdeci">static constexpr uint8_t REG_OUTX_L_G</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00087">imu.h:87</a></div></div>
<div class="ttc" id="aclassImu_html_ae9b0a9e77d28ec1a59d12a42cdfb9a22"><div class="ttname"><a href="classImu.html#ae9b0a9e77d28ec1a59d12a42cdfb9a22">Imu::BIT_CTRL2_G_FS0_G</a></div><div class="ttdeci">static constexpr uint8_t BIT_CTRL2_G_FS0_G</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00058">imu.h:58</a></div></div>
<div class="ttc" id="aclassImu_html_af03ac1be37e3ef1fa5915f0275b38269"><div class="ttname"><a href="classImu.html#af03ac1be37e3ef1fa5915f0275b38269">Imu::REG_X_OFS_USR</a></div><div class="ttdeci">static constexpr uint8_t REG_X_OFS_USR</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00089">imu.h:89</a></div></div>
<div class="ttc" id="aclassImu_html_af49fb8c5b6271c8ff025042d50b50344"><div class="ttname"><a href="classImu.html#af49fb8c5b6271c8ff025042d50b50344">Imu::raw_gyro_</a></div><div class="ttdeci">Axis&lt; int16_t &gt; raw_gyro_</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00033">imu.h:33</a></div></div>
<div class="ttc" id="aclassSpi_html"><div class="ttname"><a href="classSpi.html">Spi</a></div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00011">spi.h:11</a></div></div>
<div class="ttc" id="aclassSpi_html_a91c0eeec99491ce1392baecdb8ec7495"><div class="ttname"><a href="classSpi.html#a91c0eeec99491ce1392baecdb8ec7495">Spi::transmit</a></div><div class="ttdeci">bool transmit(int index)</div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00068">spi.h:68</a></div></div>
<div class="ttc" id="aclassSpi_html_ade7f363df8128f984a04896748284790"><div class="ttname"><a href="classSpi.html#ade7f363df8128f984a04896748284790">Spi::transaction</a></div><div class="ttdeci">spi_transaction_t * transaction(int index)</div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00073">spi.h:73</a></div></div>
<div class="ttc" id="aclassSpi_html_aedce6d0a15c2b6e76fc2929260b084a0"><div class="ttname"><a href="classSpi.html#aedce6d0a15c2b6e76fc2929260b084a0">Spi::add</a></div><div class="ttdeci">int add(uint8_t command_bits, uint8_t address_bits, uint8_t mode, int clock_speed_hz, gpio_num_t spics_io_num, int queue_size)</div><div class="ttdef"><b>Definition:</b> <a href="spi_8h_source.html#l00044">spi.h:44</a></div></div>
<div class="ttc" id="anamespacedata_html"><div class="ttname"><a href="namespacedata.html">data</a></div><div class="ttdef"><b>Definition:</b> <a href="average_8h_source.html#l00005">average.h:5</a></div></div>
<div class="ttc" id="aspi_8h_html"><div class="ttname"><a href="spi_8h.html">spi.h</a></div></div>
<div class="ttc" id="astructImu_1_1Axis_html"><div class="ttname"><a href="structImu_1_1Axis.html">Imu::Axis</a></div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00023">imu.h:23</a></div></div>
<div class="ttc" id="astructImu_1_1Axis_html_a06f6f62e8cac165584385ba2584cb13b"><div class="ttname"><a href="structImu_1_1Axis.html#a06f6f62e8cac165584385ba2584cb13b">Imu::Axis::z</a></div><div class="ttdeci">T z</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00026">imu.h:26</a></div></div>
<div class="ttc" id="astructImu_1_1Axis_html_aaaaa5d7d28228d756518e16ce9c5555f"><div class="ttname"><a href="structImu_1_1Axis.html#aaaaa5d7d28228d756518e16ce9c5555f">Imu::Axis::y</a></div><div class="ttdeci">T y</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00025">imu.h:25</a></div></div>
<div class="ttc" id="astructImu_1_1Axis_html_ad0e3fc41f7e748c8daec9022789d481f"><div class="ttname"><a href="structImu_1_1Axis.html#ad0e3fc41f7e748c8daec9022789d481f">Imu::Axis::x</a></div><div class="ttdeci">T x</div><div class="ttdef"><b>Definition:</b> <a href="imu_8h_source.html#l00024">imu.h:24</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
